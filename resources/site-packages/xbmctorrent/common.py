from xbmctorrent.plugin import plugin


import sys
import os
RESOURCES_PATH = os.path.join(os.path.dirname(sys.modules["__main__"].__file__), 'resources')
BIN_PATH = os.path.join(RESOURCES_PATH, "bin", sys.platform)
UA = "Mozilla/5.0 (X11; CrOS i686 2268.111.0) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.57 Safari/536.11"


def url_for_magnet(magnet_uri):
    return plugin.url_for("play_magnet", magnet_uri=magnet_uri)


@plugin.route("/play/<magnet_uri>")
def play_magnet(magnet_uri):
    from xbmctorrent.player import TorrentPlayer
    TorrentPlayer().init(magnet_uri).loop()
