from xbmctorrent.plugin import plugin
import sys
import os
from xbmctorrent.platform import PLATFORM


RESOURCES_PATH = os.path.join(os.path.dirname(sys.modules["__main__"].__file__), 'resources')
BIN_PATH = os.path.join(RESOURCES_PATH, "bin", "%(os)s_%(arch)s" % PLATFORM)

USER_AGENT = "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/30.0.1599.66 Safari/537.36"

def url_for_magnet(magnet_uri):
    return plugin.url_for("play_magnet", magnet_uri=magnet_uri)


@plugin.route("/play/<magnet_uri>")
def play_magnet(magnet_uri):
    from xbmctorrent.player import TorrentPlayer
    TorrentPlayer().init(magnet_uri).loop()
