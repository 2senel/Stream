import os
import subprocess
from xbmctorrent.common import BIN_PATH

def start(**kwargs):
    args = [os.path.join(BIN_PATH, "torrent2http")]
    for k, v in kwargs.items():
        args.append("--%s" % k)
        args.append(v)

    import xbmc
    xbmc.log(repr(args))
    return subprocess.Popen(args, cwd=BIN_PATH)
