import sys
import os
import xbmc

def platform():
    ret = {
        "arch": sys.maxsize > 2**32 and "x64" or "x86",
    }

    if xbmc.getCondVisibility("system.platform.linux"):
        ret["os"] = "Linux"
        if "arm" in os.uname()[4]:
            ret["arch"] = "arm"
    elif xbmc.getCondVisibility("system.platform.xbox"):
        system_platform = "Xbox"
        ret["arch"] = ""
    elif xbmc.getCondVisibility("system.platform.windows"):
        ret["os"] = "Windows"
    elif xbmc.getCondVisibility("system.platform.osx"):
        ret["os"] = "Darwin"
    elif xbmc.getCondVisibility("system.platform.ios"):
        ret["os"] = "IOS"
        ret["arch"] = "arm"
    elif xbmc.getCondVisibility("system.platform.android"):
        system_platform = "Android"
        if "arm" in os.uname()[4]:
            ret["arch"] = "arm"

    return ret

PLATFORM = platform()
