from stream import plugin, magnet, scrapers
from stream.ga import tracked
from stream.utils import ensure_fanart
from stream.platform import PLATFORM
from stream.scrapers import \
    MODULES, \
    eztv, \
    yify, \
    tpb


@plugin.route("/")
@tracked(force=True)
def index():
    if PLATFORM["os"] not in ["android", "linux", "windows", "darwin"]:
        plugin.notify("Your system \"%(os)s_%(arch)s\" is not supported. Sorry about that." % PLATFORM, delay=15000)

    for module in MODULES:
        yield {
            "label": module["name"],
            "thumbnail": module["image"],
            "path": plugin.url_for(module["view"]),
        }
